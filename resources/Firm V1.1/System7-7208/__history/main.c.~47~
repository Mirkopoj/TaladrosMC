#include <main.h>
int16 pote;
int16 dc;

void main()
{
   setup_adc(ADC_CLOCK_INTERNAL);
   setup_adc_ports(sAN2 | VSS_VDD);
   set_adc_channel(2);
      
   setup_timer_2(T2_DIV_BY_16,255,1);      //2,0 ms overflow, 2,0 ms interrupt
   setup_pwm1(PWM_ENABLED | PWM_ACTIVE_HIGH | PWM_OUTPUT);
   
   set_pwm1_duty(102);
   delay_ms(1000);
   set_pwm1_duty(52);
   delay_ms(1000);
   set_pwm1_duty(0);
   delay_ms(500);
   
   while(TRUE)
   {
      pote = read_adc();
      dc = 377 - ((pote * 62) / 100);
      set_pwm1_duty(dc);
      delay_ms(100);
   }
}
